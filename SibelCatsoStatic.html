<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CATSO Maths — Dynamic 30-question Quiz</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#f6f8fb;
      --card:#fff;
      --correct:#d4f7d9;
      --wrong:#ffd6d6;
      --accent:#0b63d6;
      --muted:#666;
      --font: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    html,body{height:100%;margin:0;background:var(--bg);font-family:var(--font);color:#112;}
    .app{
      max-width:1100px;margin:18px auto;padding:14px;
    }
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px}
    h1{font-size:1.25rem;margin:0}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:var(--accent);color:white;border:0;padding:8px 12px;border-radius:8px;cursor:pointer;font-weight:600}
    button.secondary{background:transparent;border:1px solid #d0d7e6;color:var(--accent);font-weight:600}
    .meta{font-size:0.95rem;color:var(--muted)}
    .scorebox{background:var(--card);padding:10px;border-radius:8px;box-shadow:0 2px 6px rgba(10,20,40,0.05);display:flex;flex-direction:column;gap:6px;align-items:flex-end}
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    /* question card */
    .qcard{
      background:var(--card);
      padding:10px;border-radius:10px;box-shadow:0 1px 4px rgba(10,20,40,0.04);
      font-size:0.95rem;
    }
    fieldset{border:0;padding:0;margin:0}
    legend{font-weight:700;margin-bottom:6px}
    .options{display:flex;flex-direction:column;gap:4px}
    label.opt{
      display:flex;gap:8px;align-items:center;padding:6px;border-radius:8px;cursor:pointer;
      border:1px solid transparent;
    }
    input[type="radio"]{transform:scale(1.05);margin-right:6px}
    .opt.correct{background:var(--correct);border-color:#83d58d}
    .opt.wrong{background:var(--wrong);border-color:#f79b9b}
    .rough{width:100%;margin-top:8px}
    textarea.roughbox{width:100%;height:45px;border-radius:6px;border:1px solid #d7dbe6;padding:6px;font-size:0.9rem;resize:vertical}
    .final-panel{
      position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:var(--card);padding:18px;border-radius:12px;
      box-shadow:0 10px 40px rgba(10,20,40,0.15);display:none;min-width:280px;z-index:999;
    }
    .final-panel.show{display:block}
    .final-score{font-size:1.4rem;font-weight:800;color:var(--accent)}
    /* responsive & print */
    @media (max-width:900px){
      .grid{grid-template-columns: 1fr}
    }
    @media print{
      body{background:white}
      header, .controls, .final-panel{display:none}
      .grid{column-gap:6px}
      .qcard{page-break-inside:avoid;}
    }
    small.hint{color:var(--muted)}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <h1>CATSO Maths — Random 30-question Quiz</h1>
        <div class="meta">Questions are picked randomly from the provided syllabus. Reload for a new set.</div>
      </div>
      <div class="controls">
        <div class="scorebox">
          <div>Answered: <span id="answeredCount">0</span>/30</div>
          <div>Score: <strong id="score">0</strong></div>
        </div>
        <button id="printBtn" title="Print this page">Print</button>
        <button class="secondary" id="restartBtn" title="New 30 questions">New 30</button>
      </div>
    </header>

    <main>
      <div id="questionsGrid" class="grid"></div>
    </main>
  </div>

  <div id="finalPanel" class="final-panel" role="dialog" aria-modal="true">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div>
        <div class="final-score" id="finalScoreText">0 / 30</div>
        <div class="meta" id="finalPercent">0%</div>
      </div>
      <div style="text-align:right">
        <button id="closeFinal" style="margin-bottom:8px">Close</button><br/>
        <button id="newAgain">New Quiz</button>
      </div>
    </div>
    <hr/>
    <div style="font-size:0.95rem;margin-top:8px">
      Tip: Reload or press "New 30" to generate another random set.
    </div>
  </div>

<script>
/* Question bank extracted from user's syllabus.
   Each object: {q: "Question text", options: [...], answer: index}
*/
const BANK = [
  { q: "The number that comes after 5 is:", options:["4","6","7","8"], answer:1 },
  { q: "The shape of a Wheel is:", options:["Square","Circle","Triangle","Rectangle"], answer:1 },
  { q: "How many days are there in a week?", options:["5","6","7","8"], answer:2 },
  { q: "The number that comes before 10 is:", options:["9","8","7","11"], answer:0 },
  { q: "Which of these is the smallest number?", options:["3","5","1","2"], answer:2 },
  { q: "The shape of a slice of pizza is:", options:["Square","Triangle","Circle","Rectangle"], answer:1 },
  { q: "Which is an even number?", options:["4","3","5","7"], answer:0 },
  { q: "The day after Monday is:", options:["Sunday","Wednesday","Tuesday","Friday"], answer:2 },
  { q: "How many sides does a square have?", options:["3","4","5","2"], answer:1 },
  { q: "The number 8 is:", options:["Odd","Even","Prime","Zero"], answer:1 },
  { q: "The value of 2 tens is:", options:["2","20","200","12"], answer:1 },
  { q: "Which is the largest number?", options:["7","9","10","8"], answer:2 },
  { q: "The shape of a book is usually:", options:["Circle","Rectangle","Triangle","Cube"], answer:1 },
  { q: "The number that comes after 19 is:", options:["18","20","21","22"], answer:1 },
  { q: "How many months are there in a year?", options:["10","12","11","9"], answer:1 },
  { q: "Which of these is a 3-D shape?", options:["Square","Cube","Triangle","Rectangle"], answer:1 },
  { q: "The number 1 is:", options:["Odd","Even","Neither prime nor composite","Zero"], answer:2 },
  { q: "Which is the smallest of these?", options:["8","6","4","5"], answer:2 },
  { q: "The shape of a ball is:", options:["Cube","Sphere","Cylinder","Cone"], answer:1 },
  { q: "The number of days in February in a leap year is:", options:["28","29","30","27"], answer:1 },
  { q: "Which one is greater?", options:["11","9","8","7"], answer:0 },
  { q: "How many corners does a triangle have?", options:["3","4","5","2"], answer:0 },
  { q: "The number that comes before 1 is :", options:["0","2","3","4"], answer:0 },
  { q: "Which shape has no corners", options:["Square","Circle","Triangle","Rectangle"], answer:1 },
  { q: "The number of seconds in a minute is :", options:["50","60","70","80"], answer:1 },
  { q: "Which is the smallest odd number?", options:["1","3","5","7"], answer:0 },
  { q: "How many sides does a rectangle have?", options:["2","4","3","5"], answer:1 },
  { q: "The number 10 is:", options:["Odd","Even","Prime","Zero"], answer:1 },
  { q: "Which is smaller?", options:["7","2","6","4"], answer:1 },
  { q: "The shape of a dice is:", options:["Cylinder","Cube","Sphere","Cone"], answer:1 },
  { q: "The number that comes after 49 is:", options:["50","48","51","52"], answer:0 },
  { q: "How many months have 31 days?", options:["6","7","5","8"], answer:1 },
  { q: "Which is the largest?", options:["15","20","25","10"], answer:2 },
  { q: "How many sides does a triangle have?", options:["2","3","4","5"], answer:1 },
  { q: "The value of 5 tens is:", options:["5","50","500","15"], answer:1 },
  { q: "Which is an odd number?", options:["8","4","7","6"], answer:2 },
  { q: "The number 100 is:", options:["Odd","Even","prime","smallest"], answer:1 },
  { q: "The shape of a can is:", options:["Cube","Cylinder","Sphere","Cone"], answer:1 },
  { q: "The number that comes before 15 is:", options:["13","14","16","12"], answer:1 },
  { q: "Which is the smallest of these?", options:["50","25","10","5"], answer:3 },
  { q: "The number of sides in a pentagon is:", options:["4","5","6","3"], answer:1 },
  { q: "The number 9 is:", options:["Even","Odd","Prime","Zero"], answer:1 },
  { q: "The value of 3 tens is:", options:["3","30","300","13"], answer:1 },
  { q: "Which is greater?", options:["18","20","15","19"], answer:1 },
  { q: "The shape of a birthday hat is:", options:["Cube","Cone","Sphere","Cylinder"], answer:1 },
  { q: "The number that comes after 0 is:", options:["2","1","3","4"], answer:1 },
  { q: "How many hours are there in one day?", options:["12","18","24","36"], answer:2 },
  { q: "Which is the smallest two-digit number?", options:["20","30","10","11"], answer:2 },
  { q: "The number of equal sides in a square is:", options:["2","3","4","0"], answer:2 },
  { q: "The value of 1 hundred is:", options:["1","10","100","1000"], answer:2 },
  { q: "The place value of 5 in 52 is:", options:["5","50","500","15"], answer:1 },
  { q: "A clock shows 3 o'clock. Where is the minute hand pointing?", options:["12","3","6","9"], answer:0 },
  { q: "The number that comes before 70 is:", options:["60","69","71","68"], answer:1 },
  { q: "How many minutes are there in half an hour?", options:["15","30","45","60"], answer:1 },
  { q: "The place value of 7 in 374 is:", options:["7","70","700","74"], answer:1 },
  { q: "The short hand of a clock shows:", options:["Minutes","Hours","Seconds","Days"], answer:1 },
  { q: "The value of 6 hundreds is:", options:["6","60","600","6000"], answer:2 },
  { q: "How many days are there in the month of June?", options:["30","31","28","29"], answer:0 },
  { q: "The place value of 4 in 546 is:", options:["4","40","400","46"], answer:1 },
  { q: "A clock shows 9:30. Where is the hour hand between'?", options:["8 and 9","9 and 10","10 and 11","9 and 11"], answer:1 },
  { q: "I am a number after 6 and before 8. I am ?", options:["5","7","8","9"], answer:1 },
  { q: "I have 3 sides and 3 corners. What shape am I?", options:["Square","Triangle","Circle","Rectangle"], answer:1 },
  { q: "I am the smallest even number. Who am I?", options:["1","2","3","4"], answer:1 },
  { q: "I am a shape with no corners. Who am I?", options:["Triangle","Square","Circle","Rectangle"], answer:2 },
  { q: "I am 1 less than 20. Who am I?", options:["18","19","20","21"], answer:1 },
  { q: "I am the number of fingers on both hands. Who am I?", options:["5","10","8","12"], answer:1 },
  { q: "I am a shape like a dice. What am I?", options:["Sphere","Cone","Cube","Cylinder"], answer:2 },
  { q: "I am 3 more than 6. Who am I?", options:["8","9","10","11"], answer:1 },
  { q: "I am the day that comes after Friday. Who am i?", options:["Sunday","Saturday","Monday","Tuesday"], answer:1 },
  { q: "I am the number of hours in half a day. Who am i?", options:["6","12","24","18"], answer:1 },
  { q: "I have 4 equal sides. What shape am I?", options:["Rectangle","Square","Triangle","Circle"], answer:1 },
  { q: "I am 2 less than 15. Who am I?", options:["12","13","14","15"], answer:0 },
  { q: "I am the shape of a ball. Who am I?", options:["Cone","Cube","Sphere","Cylinder"], answer:2 },
  { q: "I am the biggest 1-digit number. Who am I?", options:["8","9","7","6"], answer:1 },
  { q: "I am the first month of the year. Who am I?", options:["February","January","March","December"], answer:1 },
  { q: "I am the number between 49 and 51. Who am I?", options:["49","50","51","52"], answer:1 },
  { q: "I am the shape of an ice cream cone. Who am I?", options:["Sphere","Cone","Cube","Cylinder"], answer:1 },
  { q: "I am 10 more than 30. Who am I?", options:["35","40","45","50"], answer:1 },
  { q: "I am the number of sides in a rectangle. Who am I?", options:["2","3","4","5"], answer:2 },
  { q: "I am the day that comes before Tuesday. Who am I?", options:["Wednesday","Monday","Sunday","Thursday"], answer:1 }
];

// helpers
function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

const TOTAL = 30;
let selectedSet = [];
let score = 0;
let answered = 0;

function pickQuestions(){
  const copy = BANK.map((x,i)=>({...x, id:i}));
  shuffle(copy);
  return copy.slice(0, TOTAL);
}

function createQuestionElement(obj, index){
  const card = document.createElement('div');
  card.className = 'qcard';
  const fs = document.createElement('fieldset');
  const legend = document.createElement('legend');
  legend.innerText = (index+1) + ". " + obj.q;
  fs.appendChild(legend);

  const opts = document.createElement('div');
  opts.className = 'options';
  obj.options.forEach((optText,optIndex)=>{
    const lbl = document.createElement('label');
    lbl.className = 'opt';
    lbl.setAttribute('data-q', obj.id);
    lbl.setAttribute('data-idx', optIndex);

    const input = document.createElement('input');
    input.type = 'radio';
    input.name = 'q_'+obj.id;
    input.value = optIndex;
    input.setAttribute('aria-label', "Option " + (optIndex+1) + " " + optText);

    // when clicked check answer
    input.addEventListener('change', function(e){
      handleAnswer(obj, obj.id, optIndex, lbl.parentElement);
    });

    const textSpan = document.createElement('span');
    textSpan.innerText = String.fromCharCode(65 + optIndex) + ") " + optText;
    lbl.appendChild(input);
    lbl.appendChild(textSpan);
    opts.appendChild(lbl);
  });
  fs.appendChild(opts);

  // rough work
  const rough = document.createElement('div');
  rough.className = 'rough';
  rough.innerHTML = `<small class="hint">Rough work:</small><textarea class="roughbox" placeholder="Work area (won't affect score)"></textarea>`;
  fs.appendChild(rough);

  card.appendChild(fs);
  return card;
}

function handleAnswer(questionObj, qid, chosenIdx, parent){
  // If already locked, ignore
  const radios = parent.querySelectorAll('input[type="radio"]');
  // If any disabled then it's locked
  if (radios[0] && radios[0].disabled) return;

  // lock all radios for this question
  radios.forEach(r=>r.disabled = true);

  // find label elements and mark
  const labels = parent.querySelectorAll('label.opt');
  labels.forEach(lbl=>{
    const idx = parseInt(lbl.getAttribute('data-idx'),10);
    if (idx === questionObj.answer){
      lbl.classList.add('correct');
    }
    if (idx === chosenIdx && idx !== questionObj.answer){
      lbl.classList.add('wrong');
    }
  });

  // update score and answered count
  answered++;
  if (chosenIdx === questionObj.answer){
    score++;
  }
  updateScoreUI();

  // if completed show final
  if (answered === TOTAL){
    setTimeout(showFinalPanel, 300);
  }
}

function updateScoreUI(){
  document.getElementById('score').innerText = score;
  document.getElementById('answeredCount').innerText = answered;
}

function renderQuiz(){
  score = 0; answered = 0;
  updateScoreUI();
  selectedSet = pickQuestions();
  const grid = document.getElementById('questionsGrid');
  grid.innerHTML = '';
  selectedSet.forEach((qobj, idx)=>{
    const el = createQuestionElement(qobj, idx);
    grid.appendChild(el);
  });
  // scroll top
  window.scrollTo({top:0,behavior:'smooth'});
}

function showFinalPanel(){
  const panel = document.getElementById('finalPanel');
  document.getElementById('finalScoreText').innerText = `${score} / ${TOTAL}`;
  const percent = Math.round((score / TOTAL) * 100);
  document.getElementById('finalPercent').innerText = percent + "%";
  panel.classList.add('show');
}

// hooks
document.getElementById('printBtn').addEventListener('click', ()=>window.print());
document.getElementById('restartBtn').addEventListener('click', ()=> {
  // quick restart
  renderQuiz();
  document.getElementById('finalPanel').classList.remove('show');
});
document.getElementById('closeFinal').addEventListener('click', ()=> {
  document.getElementById('finalPanel').classList.remove('show');
});
document.getElementById('newAgain').addEventListener('click', ()=> {
  renderQuiz();
  document.getElementById('finalPanel').classList.remove('show');
});

// initialize
renderQuiz();

</script>
</body>
</html>
